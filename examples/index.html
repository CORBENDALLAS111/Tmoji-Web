<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TMoji Web - Example</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #f5f5f5;
        }
        h1 { color: #0088CC; }
        .example {
            background: white;
            padding: 24px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .emoji-container {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px;
            background: #f0f0f0;
            border-radius: 8px;
            margin: 8px 0;
        }
        button {
            background: #0088CC;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover { background: #0077B3; }
        input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            width: 300px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>ðŸŽ¨ TMoji Web Examples</h1>

    <div class="example">
        <h2>1. Render Single Emoji</h2>
        <div id="single-emoji" class="emoji-container">
            Loading...
        </div>
        <br>
        <button onclick="renderRandom()">Render Random</button>
    </div>

    <div class="example">
        <h2>2. Text with Inline Emojis</h2>
        <div id="text-emojis"></div>
        <br>
        <button onclick="renderText()">Render Text</button>
    </div>

    <div class="example">
        <h2>3. Load Emoji Pack</h2>
        <input type="text" id="pack-url" placeholder="Pack URL or name" 
               value="adaptive1pack_by_TMojiBot">
        <button onclick="loadPack()">Load Pack</button>
        <div id="pack-results" style="margin-top: 16px;"></div>
    </div>

    <div class="example">
        <h2>4. HTML Auto-parse</h2>
        <p>Native tag: <tmoji id="123456789" size="1.5em"></tmoji></p>
        <button onclick="parseTags()">Parse Tags</button>
    </div>

    <!-- Load library -->
    <script type="module">
        import { TMoji } from '../frontend/dist/tmoji.esm.js';

        window.tg = new TMoji({
            apiBaseUrl: 'http://localhost:8000',
            defaultSize: '2em'
        });

        // Make functions global
        window.renderRandom = async () => {
            const container = document.getElementById('single-emoji');
            container.innerHTML = 'Loading...';
            try {
                // Example emoji ID - replace with real one
                await window.tg.renderTo(container, '123456789');
            } catch (e) {
                container.innerHTML = 'Error: ' + e.message;
            }
        };

        window.renderText = async () => {
            const container = document.getElementById('text-emojis');
            await window.tg.renderText(container, 'Hello {emoji:123} World {emoji:456}! ðŸŽ‰');
        };

        window.loadPack = async () => {
            const url = document.getElementById('pack-url').value;
            const results = document.getElementById('pack-results');
            results.innerHTML = 'Loading...';
            try {
                const pack = await window.tg.loadPack(url);
                results.innerHTML = `<p>Loaded <strong>${pack.stickers.length}</strong> emojis from "${pack.title}"</p>`;
            } catch (e) {
                results.innerHTML = 'Error: ' + e.message;
            }
        };

        window.parseTags = async () => {
            await window.tg.parseAll();
        };
    </script>
</body>
</html>
